const https = require("https");
const express = require('express');
const app = express();
const io = require('socket.io');
const fs = require("fs");
const bodyParser = require("body-parser");
const dbidcheck = require("./Dbidcheck");

app.use('/', express.static('../my-app/build'));
app.use(bodyParser.json());

/*
app.get("/", function(req, res) {
    res.sendFile(__dirname + "/index.html");
});
*/


app.post("/", function(req, res) {
     console.log(req.body.emailaddress);
     let checkdbid =  dbidcheck.dbid(req.body.emailaddress, req.body.currentuser);
        if(checkdbid === "notfind"){
     //todo
   }
     else if(checkdbid === "find"){
      //rodo
   }
     res.send({"answer": "queue0"});
});


const options = {
    key: fs.readFileSync("server.key"),
    cert: fs.readFileSync("server.cert"),
};

var server = https.createServer(options, app);

server.listen(3000, 'testprog', function(req, res) {
              console.log("server started at port 5000");
}); 

// const socket = io.listen(server);

// Creating a server


// Write response as Html(text)


// Writing static text


